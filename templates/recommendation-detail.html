{% extends 'base.html' %}
{% block content %}



<div>
    <a href="/recommendations/{{rec.rec_id}}"><h4>{{rec.userbook.book.title}}</h4></a>
    <img src="{{rec.userbook.book.img_url}}"/> <br> <br>

    by {{rec.userbook.book.author}} 
    <br>
    Recommended on {{rec.date_provided.strftime("%B %d, %Y")}}
    <br>
    <br>
        <button class="btn-feedback btn-read-now">I'll read this now!</button> 
        <button class="btn-feedback btn-read-later">I'll read this later</button> 
        <button class="btn-feedbac" btn-reje"t">Ew no.</button> 
        <br>
    Already read this one? <button href='{{rec.userbook.book.goodreads_url}}' class="btn-feedback btn-already-read">Rate this book on Goodreads!</button>

<!-- Preview: {{rec.userbook.book.preview}} -->


</div>

<script src="https://code.jquery.com/jquery.js"></script>
<script>


function colorizeButton() {
    // when page loads OR when user clicks a button
    // colorize approprate button based on feedback
}


function serverRelay() {
    // send status to server
    if (this.class==="btn-read-now") {
        $.post("/recommendations/<int:rec_id>/user-feedback", {'response':"read-now"}, colorizeButton);
    } else if (this.class==="btn-read-later") {
        $.post("/recommendations/<int:rec_id>/user-feedback", {'response':"read-later" }, colorizeButton);
    } else if (this.class==="btn-reject") {
        $.post("/recommendations/<int:rec_id>/user-feedback", {'response':"reject" }, colorizeButton);
    } else if (this.class==="btn-already-read"){
        $.post("/recommendations/<int:rec_id>/user-feedback", {'response':"already-read" }, colorizeButton);
    }
}
    

$(".btn-feedback").click(function() {
    serverRelay();
});

// when feedback exists for recommendation, 
// colorize appropriate button


</script>

{% endblock %}
